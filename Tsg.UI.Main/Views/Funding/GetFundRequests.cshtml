@model IEnumerable<TSG.Models.ServiceModels.Fundings>
@using Tsg.UI.Main.App_LocalResources
@using Tsg.UI.Main.Models
@using TSG.Models.Enums
@using WinstantPay.Common.Extension

@{
    ViewBag.Title = GlobalRes.FundingGetFundRequestsPage_Title;
    Layout = "~/Views/Shared/_LayoutMain.cshtml";
}
<script src="/Content/assets/vendor/jquery/jquery.js"></script>
@*<link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
    <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.3.0/js/bootstrap-datepicker.js"></script>
    <link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.3.0/css/datepicker3.css">*@
<div class="row">
    <section class="panel">
        <header class="panel-heading" data-panel-toggle="">
            <div class="panel-actions">
                <a href="#" class="panel-action panel-action-toggle" data-panel-toggle=""></a>
            </div>

            <h2 class="panel-title">@ViewBag.Title</h2>
            <p class="panel-subtitle">@GlobalRes.FundingGetFundRequestsPage_SubTitle</p>
        </header>

        <div class="panel-body" style="display: block;">
            <div class="row">
                <div class="col-sm-12 text-right">
                    @*<a id="addnewRecord" data-toggle="modal" data-target="#createModal">
                        <i class="fa fa-filter fa-2x" aria-hidden="true"></i>
                    </a>*@
@* *@
@*                     @if (Model.FilterModel.BankId != null || Model.FilterModel.CurrencyId != null || Model.FilterModel.AmountMin != null || Model.FilterModel.AmountMax != null || Model.FilterModel.BeginDate != null || Model.FilterModel.EndDate != null) *@
@*                     { *@
@*                         <a href="~/Funding/GetFundRequests"> *@
@*                             <i class="fa fa-filter fa-2x"></i> *@
@*                             <i class="fa fa-times" style="color: red; margin-left: -14px;"></i> *@
@*                         </a> *@
@*                     } *@
                </div>
            </div>
            @if (Model != null)
            {
                <table class="table table-bordered table-striped table-condensed mb-none" id="datatable-default">

                    <thead>
                        <tr>
                            <th>@GlobalRes.FundingGetFundRequestsPage_Id</th>
                            <th>@GlobalRes.FundingGetFundRequestsPage_Status</th>
                            <th>@GlobalRes.FundingGetFundRequestsPage_CCY</th>
                            @* <th>@GlobalRes.FundingGetFundRequestsPage_Bank</th> *@
                            <th>@GlobalRes.FundingGetFundRequestsPage_Amount</th>
                            <th>@GlobalRes.FundingGetFundRequestsPage_Date</th>
                            @* <th>@GlobalRes.FundingGetFundRequestsPage_SendingBank</th> *@
                            @*<th>@GlobalRes.FundingGetFundRequestsPage_AccNumber</th>*@
                            @*<th class="hidden-xs hidden-md">@GlobalRes.FundingGetFundRequestsPage_OtherInformation</th>*@
                            @*<th>@GlobalRes.FundingGetFundRequestsPage_Proof</th>*@
                            <th>@GlobalRes.FundingGetFundRequestsPage_Action</th>
                        </tr>
                    </thead>
                    <tbody>
                    @{
                        int counter = 0;
                        foreach (var item in Model)
                        {
                            var description = EnumHelper<FundingStatus>.GetDisplayValue((FundingStatus) item.Fundings_StatusByFund);
                            counter++;
                            
                            var amount = item.Fundings_Amount;
                        <tr>
                            <td>
                                @counter
                                @*@Html.DisplayFor(modelItem => item.Fundings_Id)*@
                            </td>
                            <td>
                                @if (item.Fundings_StatusByFund == (int)FundingStatus.InProcess)
                                {
                                    <span class="label btn-xs btn-default_custom">
                                        @description
                                    </span>
                                }
                                @if (item.Fundings_StatusByFund == (int)FundingStatus.Pending)
                                {
                                    <span class="label btn-xs btn-warning_custom">@description</span>
                                }
                                @if (item.Fundings_StatusByFund == (int)FundingStatus.Credited)
                                {
                                    <span class="label btn-xs btn-success_custom">@description</span>
                                }
                                @if (item.Fundings_StatusByFund == (int)FundingStatus.Canceled)
                                {
                                    <span class="label btn-xs btn-danger_custom">@description</span>
                                }
                            </td>
                            <td>
                                <img src="/Content/assets/images/onebyone.png" class='@String.Format("flag flag-{0}", item.Fundings_Currency.Currency_CcyCode.ToLower())'> &nbsp;
                                @Html.DisplayFor(modelItem => item.Fundings_Currency.Currency_CcyName)
                            </td>
                            <td class="text-right">
                                <span>@(item.Fundings_Currency.Currency_CcyName == "BTC" ? amount.ToString("N8") : amount.ToString("N2"))</span>
                            </td>
                            <td>
                                @String.Format("{0:MMM dd, yyyy}", item.Fundings_CreateDate) at @String.Format("{0:HH:mm}", item.Fundings_CreateDate)
                            </td>
                            <td>
                                @Html.ActionLink("Update", "UpdateFundRequestStatus", new { fundId = item.Fundings_Id, sourceId = item.Fundings_SourceType }, new { @class = "mb-xs btn btn-xs btn-info" })
                            </td>
                        </tr>
                        }
                    }
                    </tbody>
                </table>
            }
        </div>

        <!-- Modal Add record Begin -->
        @*<form id="Create" action="/Funding/GetFundRequests" method="post" class="form-horizontal" novalidate="novalidate">
            <div class="modal fade" id="createModal" tabindex="-1" role="dialog" aria-labelledby="createModalLabel" aria-hidden="true">
                <div class="modal-dialog" role="document" style="top:30%">
                    <div class="modal-content">
                        <div class="modal-header">
                            <img src="/Content/assets/images/winstantpay-logo-notag.png" height="35" alt="" />
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close" style="margin-top: 5px">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body">
                            <br />
                            <div class="row" style="padding-bottom: 5px">
                                <div class="col-sm-4"><strong>@GlobalRes.FundingGetFundRequestsPage_ModalFilterRecBank</strong></div>
                                <div class="col-sm-8">
                                    @Html.DropDownListFor(m => Model.FilterModel.BankId, UiHelper.PrepareAvailableBank(), new { @class = "form-control" })
                                </div>
                            </div>
                            <div class="row" style="padding-bottom: 5px">
                                <div class="col-sm-4">
                                    <strong>@GlobalRes.FundingGetFundRequestsPage_ModalFilterRecCurrency</strong>

                                </div>
                                <div class="col-sm-8">
                                    @Html.DropDownListFor(m => Model.FilterModel.CurrencyId, UiHelper.PrepareAvailableCurrencies(), new { @class = "form-control", required = "" })
                                </div>
                            </div>
                            <div class="row" style="padding-bottom: 5px">
                                <div class="col-sm-4">
                                    <strong>@GlobalRes.FundingGetFundRequestsPage_ModalFilterRecDate</strong>
                                    <div class="col-sm-offset-2 col-sm-8">
                                        @*<strong>Begin</strong>
                                            <br />
                                            <strong>End</strong>*@
                                    @*</div>
                                </div>
                                <div class="col-sm-4">
                                    @GlobalRes.FundingGetFundRequestsPage_ModalFilterRecStart
                                    <div class="input-group date" data-plugin-datepicker="" id="dpStart" style="margin-bottom: 5px">
                                        <span class="input-group-addon">
                                            <i class="fa fa-calendar"></i>
                                        </span>
                                        @Html.TextBoxFor(t => Model.FilterModel.BeginDate, "{0:MM/dd/yyyy}", new { @class = "form-control", id = "datedaily" })
                                    </div>
                                </div>
                                <div class="col-sm-4">
                                    @GlobalRes.FundingGetFundRequestsPage_ModalFilterRecEnd
                                    <div class="input-group date" data-plugin-datepicker="" id="dpEnd" style="margin-bottom: 5px">
                                        <span class="input-group-addon">
                                            <i class="fa fa-calendar"></i>
                                        </span>
                                        @Html.TextBoxFor(t => Model.FilterModel.EndDate, "{0:MM/dd/yyyy}", new { @class = "form-control", id = "datedaily" })
                                    </div>
                                </div>
                            </div>
                            <div class="row" style="padding-bottom: 5px">
                                <div class="col-sm-4"><strong>@GlobalRes.FundingGetFundRequestsPage_ModalFilterRecAmountRange</strong></div>
                                <div class="col-sm-4">
                                    @GlobalRes.FundingGetFundRequestsPage_ModalFilterRecFrom
                                    @Html.TextBoxFor(t => Model.FilterModel.AmountMin, new { @class = "form-control", id = "datedaily", type = "number", step = "0.01" })
                                </div>

                                <div class="col-sm-4">
                                    @GlobalRes.FundingGetFundRequestsPage_ModalFilterRecTo
                                    @Html.TextBoxFor(t => Model.FilterModel.AmountMax, new { @class = "form-control", id = "datedaily", type = "number", step = "0.01" })
                                </div>
                            </div>

                            <div class="row" style="padding-bottom: 5px">
                                <div class="col-sm-4">
                                    <strong>@GlobalRes.FundingGetFundRequestsPage_ModalFilterRecNameOfSender</strong>

                                </div>
                                <div class="col-sm-8">
                                    @Html.TextBoxFor(m => Model.FilterModel.NameOfSender, "", new { @class = "form-control", required = "" })
                                </div>
                            </div>
                            <div class="row" style="padding-bottom: 5px">
                                <div class="col-sm-4">
                                    <strong>@GlobalRes.FundingGetFundRequestsPage_ModalFilterRecNameOfSendingBank</strong>
                                </div>
                                <div class="col-sm-8">
                                    @Html.TextBoxFor(m => Model.FilterModel.NameOfSendingBank, "", new { @class = "form-control", required = "" })
                                </div>
                            </div>
                            <div class="row" style="padding-bottom: 5px">
                                <div class="col-sm-4">
                                    <strong>@GlobalRes.FundingGetFundRequestsPage_ModalFilterRecAccNumber</strong>
                                </div>
                                <div class="col-sm-8">
                                    @Html.TextBoxFor(m => Model.FilterModel.AccountNumber, "", new { @class = "form-control", required = "" })
                                </div>
                            </div>
                            <div class="row" style="padding-bottom: 5px">
                                <div class="col-sm-4">
                                    <strong>@GlobalRes.FundingGetFundRequestsPage_ModalFilterRecOtherInfo</strong>
                                </div>
                                <div class="col-sm-8">
                                    @Html.TextBoxFor(m => Model.FilterModel.OtherInformation, "", new { @class = "form-control", required = "" })
                                </div>
                            </div>

                        </div>
                        <div class="modal-footer">
                            <button type="submit" class="btn btn-info">@GlobalRes.FundingGetFundRequestsPage_ModalFilterRecSearch</button>
                            <button type="button" class="btn btn-danger" data-dismiss="modal">@GlobalRes.FundingGetFundRequestsPage_ModalFilterRecClose</button>
                        </div>
                    </div>
                </div>
            </div>
        </form>*@
    </section>
</div>

@section customcss {
    <!-- Specific Page Vendor CSS -->
    <link rel="stylesheet" href="/Content/assets/vendor/select2/css/select2.css" />
    <link rel="stylesheet" href="/Content/assets/vendor/select2-bootstrap-theme/select2-bootstrap.css" />
    <link rel="stylesheet" href="/Content/assets/vendor/jquery-datatables-bs3/assets/css/datatables.css" />
}

@section VendorScripts {

    <script src="/Content/assets/vendor/select2/js/select2.js"></script>
    <script src="/Content/assets/vendor/jquery-datatables/media/js/jquery.dataTables.js"></script>

    <script src="/Content/assets/vendor/jquery-datatables/extras/TableTools/js/dataTables.tableTools.min.js"></script>
    <script src="/Content/assets/vendor/jquery-datatables-bs3/assets/js/datatables.js"></script>
}

@section Scripts {

    <!-- Examples -->
    <script src="/Content/assets/javascripts/tables/examples.datatables.default.js"></script>
}
